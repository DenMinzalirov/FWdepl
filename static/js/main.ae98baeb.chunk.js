(this["webpackJsonpfancy-weather"]=this["webpackJsonpfancy-weather"]||[]).push([[0],{71:function(e,t,a){e.exports=a(90)},76:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){},83:function(e,t,a){},86:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),o=(a(76),a(77),a(15)),i=a.n(o),s=a(28),u=a(55),m=a(56),d=a(61),p=a(60),h="https://api.unsplash.com/photos/random?orientation=landscape&per_page=1&query=nature&client_id=".concat("cjDp8Eu_-tcmdkj-GaR1LR0OmsTrsz8tqqkbJBJS0Fs"),v=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(h);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.urls)||void 0===t?void 0:t.regular);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.units,r=a.lang,c="https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&lang=").concat(r.toLowerCase(),"&units=").concat(n,"&APPID=").concat("a9a46a879917e21377a0e4454b33183b"),e.prev=2,e.next=5,fetch(c);case 5:return l=e.sent,e.next=8,l.json();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r,c,l,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,r=t.lon,c=a.units,l=a.lang,o="https://api.openweathermap.org/data/2.5/forecast?APPID=".concat("a9a46a879917e21377a0e4454b33183b","&lat=").concat(n,"&lon=").concat(r,"&units=").concat(c,"&lang=").concat(l.toLowerCase()),e.prev=3,e.next=6,fetch(o);case 6:return s=e.sent,e.next=9,s.json();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}(),E=(a(79),a(47)),b=function(e){var t,a,n,c,l="Latitude",o="Longitude";"RU"===(null===e||void 0===e||null===(t=e.centr)||void 0===t?void 0:t.lang)&&(l="\u0428\u0438\u0440\u043e\u0442\u0430",o="\u0414\u043e\u043b\u0433\u043e\u0442\u0430");var i,s,u,m,d,p,h=53.6506,v=23.8973;(null===e||void 0===e||null===(a=e.centr)||void 0===a||null===(n=a.weather)||void 0===n||null===(c=n.city)||void 0===c?void 0:c.coord)&&(h=null===e||void 0===e||null===(i=e.centr)||void 0===i||null===(s=i.weather)||void 0===s||null===(u=s.city)||void 0===u?void 0:u.coord.lat,v=null===e||void 0===e||null===(m=e.centr)||void 0===m||null===(d=m.weather)||void 0===d||null===(p=d.city)||void 0===p?void 0:p.coord.lon);function f(e){var t=Math.trunc(e),a=Math.abs(Math.round(60*(e-t)));return 0===t&&e<0&&(t="-".concat(t)),"".concat(t,"\xb0").concat(a,"\u2032")}return r.a.createElement("div",{className:"wrapper map-block"},r.a.createElement(E.b,null,r.a.createElement(E.a,{state:{center:[h,v],zoom:9}})),r.a.createElement("div",null,r.a.createElement("p",{className:"map-position"},r.a.createElement("span",null,l,": ",f(h))),r.a.createElement("p",{className:"map-position"},r.a.createElement("span",null,o,": ",f(v)))))},w=a(37),x=a(120),N=a(131);function y(){return Math.round(20*Math.random())-10}function C(){var e=50+y(),t=50+y();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var k=Object(x.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function L(e){var t=k(),a=r.a.useState(C),c=Object(w.a)(a,1)[0],l=r.a.useState(!e.isGetWeather),o=Object(w.a)(l,2),i=o[0],s=o[1];Object(n.useEffect)((function(){e.isGetWeather||u()}),[e.isGetWeather]);var u=function(){s(!0)},m=r.a.createElement("div",{style:c,className:t.paper},r.a.createElement("h2",{id:"simple-modal-title"},"City not found"));return r.a.createElement(N.a,{open:i,onClose:function(){s(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},m)}var A={backgroundUrl:"",weather:"",isLoading:!1,error:null,currentLocation:{lat:53.6173806,lon:23.817635},place:null,lang:"EN",units:"metric"},j=r.a.createContext({store:A}),O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).fetchAll=Object(s.a)(i.a.mark((function e(){var t,a,r,c,l,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.lang,r=t.units,c=t.place,n.setState({isLoading:!0}),e.prev=2,c){e.next=9;break}return e.next=6,new Promise((function(e,t){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){var a=t.coords,n=a.latitude,r=a.longitude;e({lat:n,lon:r})}),(function(e){return t(e)})):t("Not supported")}));case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=n.state.weather.city.coord;case 10:return l=e.t0,e.next=13,v();case 13:if(o=e.sent,!c){e.next=20;break}return e.next=17,f(c,{lang:a,units:r});case 17:e.t1=e.sent,e.next=23;break;case 20:return e.next=22,g(l,{lang:a,units:r});case 22:e.t1=e.sent;case 23:s=e.t1,n.setState({backgroundUrl:o,weather:s,currentLocation:l}),e.next=30;break;case 27:e.prev=27,e.t2=e.catch(2),console.error(e.t2);case 30:return e.prev=30,n.setState({isLoading:!1}),e.finish(30);case 33:case 34:case"end":return e.stop()}}),e,null,[[2,27,30,33]])}))),n.handleLanguageChange=function(e){return n.setState({lang:e},(function(){return n.fetchAll()}))},n.handleUnitsChange=function(e){return n.setState({units:e},(function(){return n.fetchAll()}))},n.handleAddressChange=function(e){return n.setState({place:e})},n.state=A,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e,t=!0;"404"===(null===(e=this.state.weather)||void 0===e?void 0:e.cod)&&(t=!1);var a={store:this.state,onRefresh:this.fetchAll,onLangChange:this.handleLanguageChange,onUnitsChange:this.handleUnitsChange,onAddressChange:this.handleAddressChange},n=this.state.backgroundUrl;return r.a.createElement(j.Provider,{value:a},r.a.createElement("div",{style:{backgroundImage:"url(".concat(n,")")},className:"app-container"},this.props.children,r.a.createElement(b,{centr:this.state}),r.a.createElement(L,{isGetWeather:t})))}}]),a}(n.Component),S=(a(83),a(124)),R=a(58),U=a.n(R),D=a(133),B=a(125),P=a(130),M=a(128),W=a(134),_=a(129),G=a(59),I=a.n(G),q=a(132),J=Object(x.a)((function(e){return{refresh:{color:"white",border:"1px solid #fff",transition:"color 0.2s ease, background-color 0.2s ease, transform 0.3s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)",height:"56px",width:"56px",marginRight:"10px","&:hover":{transform:"rotate(90deg)"}},formControl:{marginRight:"10px"},selectEmpty:{},togleButton:{height:"56px",color:"white !important",borderColor:"white"}}})),T=function(){var e=J(),t=Object(n.useContext)(j),a=t.store,c=t.onAddressChange,l=t.onRefresh,o=t.onLangChange,i=t.onUnitsChange,s=a.units;return r.a.createElement("div",{className:"controls-container"},r.a.createElement("div",{className:"controls-btn wrapper"},r.a.createElement(S.a,{className:e.refresh,onClick:l},r.a.createElement(U.a,null)),r.a.createElement(B.a,{variant:"outlined",className:e.formControl},r.a.createElement(P.a,{defaultValue:"EN",className:e.selectEmpty,onChange:function(e){o(e.target.value)}},r.a.createElement(D.a,{value:"EN"},"EN"),r.a.createElement(D.a,{value:"RU"},"RU"),r.a.createElement(D.a,{value:"BY"},"BY"))),r.a.createElement(W.a,{className:"toggle-button-container",value:s,exclusive:!0,onChange:function(e){e.target.value?i(e.target.value):i(e.target.parentElement.value)},"aria-label":"units"},r.a.createElement(M.a,{className:e.togleButton,value:"metric","aria-label":"metric"},"\u2103"),r.a.createElement(M.a,{className:e.togleButton,value:"imperial","aria-label":"imperial"},"\u2109"))),r.a.createElement("div",{className:"control-search wrapper"},r.a.createElement(q.a,{variant:"outlined",className:"search-panel",placeholder:"Search city",onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&l()}}),r.a.createElement("div",{className:"mic-icon"},r.a.createElement(I.a,{color:"action"})),r.a.createElement(_.a,{className:"btn-search",variant:"outlined",color:"primary",onClick:l},"SEARCH")))},z=(a(86),a(17)),F=(a(88),a(89),function(){var e=Object(n.useContext)(j).store,t=e.weather,a=e.lang,c=e.units,l=Object(n.useState)((new Date).toLocaleTimeString()),o=Object(w.a)(l,2),i=o[0],s=o[1];setInterval((function(){s((new Date).toLocaleTimeString())}),1e3),"404"===t.cod&&(t.city={name:"city not found"},t.list=[{main:{temp:"N/A"},weather:[{description:"N/A"}]}]),z.locale(["en-au","ru"]),"RU"===a&&z.locale("ru");var u="Temperatur: ",m="Description: ";"RU"===a&&(u="\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",m="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ");var d=" \xb0C";return"imperial"===c&&(d=" \xb0F"),r.a.createElement("div",{className:"wrapper weather-block"},r.a.createElement("div",{className:"weather-today"},r.a.createElement("div",{className:"weather-today-info"},r.a.createElement("div",{className:"location"},r.a.createElement("span",null,r.a.createElement("h1",null,t?t.city.name:""))),r.a.createElement("div",{className:"date-app"},r.a.createElement("span",null,z().format("LL")),r.a.createElement("br",null),r.a.createElement("span",null,i)),r.a.createElement("div",{className:"weather-about"},r.a.createElement("div",null,r.a.createElement("span",null,u,t?t.list[0].main.temp:"",d),r.a.createElement("br",null),r.a.createElement("span",null,m,t?t.list[0].weather[0].description:"")),r.a.createElement("img",{src:"http://openweathermap.org/img/w/".concat("04d",".png"),alt:""}))),r.a.createElement("div",{className:"weather-today-icon"},r.a.createElement("span",null,r.a.createElement("h2",null,t?t.list[0].main.temp.toString().substring(0,2):"",d)),r.a.createElement("img",{src:"http://openweathermap.org/img/w/".concat("04d",".png"),alt:""}))),r.a.createElement("div",{className:"weather-next-day"},r.a.createElement("div",{className:"weather-next-day-item"},r.a.createElement("span",null,t&&"200"===t.cod?z(t.list[8].dt_txt).format("LL"):"N/A"),r.a.createElement("span",null,u,t&&"200"===t.cod?t.list[8].main.temp:"N/A",d),r.a.createElement("span",null,m,t&&"200"===t.cod?t.list[8].weather[0].description:"N/A")),r.a.createElement("div",{className:"weather-next-day-item"},r.a.createElement("span",null,t&&"200"===t.cod?z(t.list[16].dt_txt).format("LL"):"N/A"),r.a.createElement("span",null,u,t&&"200"===t.cod?t.list[16].main.temp:"N/A",d),r.a.createElement("span",null,m,t&&"200"===t.cod?t.list[16].weather[0].description:"N/A")),r.a.createElement("div",{className:"weather-next-day-item"},r.a.createElement("span",null,t&&"200"===t.cod?z(t.list[24].dt_txt).format("LL"):"N/A"),r.a.createElement("span",null,u,t&&"200"===t.cod?t.list[24].main.temp:"N/A",d),r.a.createElement("span",null,m,t&&"200"===t.cod?t.list[24].weather[0].description:"N/A"))))}),Y=function(){return r.a.createElement(O,null,r.a.createElement(T,null),r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.ae98baeb.chunk.js.map